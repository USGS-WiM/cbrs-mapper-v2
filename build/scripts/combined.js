function addCommas(e){e+="";for(var t=e.split("."),i=t[0],a=t.length>1?"."+t[1]:"",n=/(\d+)(\d{3})/;n.test(i);)i=i.replace(n,"$1,$2");return i+a}function camelize(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")}function stateSelected(){var e=$("#stateSelect")[0];if(e.selectedIndex>0){var t=e.options[e.selectedIndex].value,i=e.options[e.selectedIndex].label;$("#downloadState").html("Download <a target='_blank' href='http://www.fws.gov/wetlands/Downloads/State/"+t+"_wetlands.zip'>Geodatabase</a> and <a target='_blank' href='http://www.fws.gov/wetlands/Downloads/State/"+t+"_shapefile_wetlands.zip'>Shapefile</a> data for <b>"+i+"</b>")}else $("#downloadState").html("")}function hucLinkListener(e){console.log(e),$.get("https://fwsmapper.wim.usgs.gov/downloadLoggingService/downloadLog.asmx/Log?huc="+e+",NWIV2",function(e){})}function message(){document.getElementById("helpfulHint").innerHTML="<hr>Click the tool again to deselect it and return to normal map controls"}var allLayers,renderer;require(["esri/InfoTemplate","esri/renderers/UniqueValueRenderer","esri/symbols/PictureMarkerSymbol","dojo/domReady!"],function(e,t,i){var a=new i("./images/grn-pushpin.png",45,45);renderer=new t(a);new e("${NAME}","Type: ${TYPE}<br/>Ramsar: <a id='ramsarLink' target='_blank' href='${HYPERLINK_2}'>click here</a><br/>Location Website: <a target='_blank' href='${HYPERLINK}'>click here</a><br/>Water Summary Report: <a target='_blank' href='${WATER_SUMMARY_REPORT}'>click here</a><br/>Wildlife Action Plan: <a target='_blank' href='${STATE_ACTION_PLAN}'>click here</a><br/>");allLayers=[{groupHeading:"ESRI dynamic map services",showGroupHeading:!1,includeInLayerList:!0,layers:{"CBRS Units":{url:"https://cbrsgis.wim.usgs.gov/arcgis/rest/services/CoastalBarrierResourcesSystem/MapServer",visibleLayers:[0,1,3,4],options:{id:"cbrs",opacity:.75,visible:!0},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,moreinfo:"https://www.fws.gov/wetlands/Data/Wetlands-V2-Product-Summary.html",includeLegend:!0}},"CBRS Footprints":{url:"https://cbrsgis.wim.usgs.gov/arcgis/rest/services/CoastalBarrierResourcesSystem/MapServer",visibleLayers:[5],options:{id:"footprints",opacity:.75,visible:!1},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!1,zoomScale:144448,hasOpacitySlider:!0,includeLegend:!1}},two:{url:"https://cbrsgis.wim.usgs.gov/arcgis/rest/services/CoastalBarrierResourcesSystem/MapServer",visibleLayers:[2],options:{id:"footprints",opacity:.75,visible:!0},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!1,zoomScale:144448,hasOpacitySlider:!0,includeLegend:!1}},four:{url:"https://cbrsgis.wim.usgs.gov/arcgis/rest/services/CoastalBarrierResourcesSystem/MapServer",visibleLayers:[4],options:{id:"footprints",opacity:.75,visible:!0},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!1,zoomScale:144448,hasOpacitySlider:!0,includeLegend:!1}},five:{url:"https://cbrsgis.wim.usgs.gov/arcgis/rest/services/CoastalBarrierResourcesSystem/MapServer",visibleLayers:[5],options:{id:"footprints",opacity:.75,visible:!0},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!1,zoomScale:144448,hasOpacitySlider:!0,includeLegend:!1}}}}]});var map,allLayers,maxLegendHeight,maxLegendDivHeight,printCount=0,legendLayers=[],measurement,identifyTask,identifyParams,cbrsClicked=!1,bufferClicked=!1,selectPointonMap=!1,pointSelection,inUnit="",inUnitType="",fiDate="N/A",suDate="N/A",pinLoc="out",infoPar="",mapDate="",mapNo="",lat=0,long=0,locDesc,latLong;require(["esri/map","esri/arcgis/utils","esri/config","esri/dijit/Geocoder","esri/dijit/HomeButton","esri/dijit/Legend","esri/dijit/LocateButton","esri/dijit/Measurement","esri/dijit/PopupTemplate","esri/graphic","esri/graphicsUtils","esri/geometry/Extent","esri/geometry/Multipoint","esri/geometry/Point","esri/layers/ArcGISTiledMapServiceLayer","esri/renderers/UniqueValueRenderer","esri/SpatialReference","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/tasks/DistanceParameters","esri/tasks/GeometryService","esri/Color","esri/tasks/FindTask","esri/tasks/FindParameters","esri/tasks/FindResult","esri/tasks/IdentifyParameters","esri/tasks/IdentifyTask","esri/tasks/LegendLayer","esri/tasks/PrintTask","esri/tasks/PrintParameters","esri/tasks/PrintTemplate","esri/tasks/query","esri/tasks/QueryTask","esri/tasks/BufferParameters","esri/geometry/webMercatorUtils","esri/urlUtils","dojo/dom","dojo/dom-class","dojo/dnd/Moveable","dojo/query","dojo/on","dojo/domReady!","dojo/_base/array"],function(e,t,i,a,n,o,s,r,l,c,p,d,u,m,h,g,f,y,b,v,w,S,L,T,D,C,B,x,_,P,k,R,O,N,I,M,E,U,F,A,z,j,q){function V(){$("#printModal").modal("show")}function G(){$("#getDataModal").modal("show")}function H(){var e=[];map.layerIds.forEach(function(t,i){if("cbrs"!=t&&"footprints"!=t){var a=map.getLayer(map.layerIds[i]);e.push(a)}});for(var t=0;t<e.length;t++)map.removeLayer(e[t])}function Y(){function e(e){printCount++;var t=$("<p><label>"+printCount+': </label>&nbsp;&nbsp;<a href="'+e.url+'" target="_blank">'+r+" </a></p>");$("#printJobsDiv").find("p.toRemove").remove(),$("#printModalBody").append(t),$("#printTitle").val(""),$("#printExecuteButton").button("reset")}function t(e){$("#printExecuteButton").button("reset"),alert("Sorry, an unclear print error occurred. Please try refreshing the application to fix the problem")}var i="This map is for general reference only. The Coastal Barrier Resources System (CBRS) boundaries depicted on this map are representations of the controlling CBRS boundaries, which are shown on the official maps, accessible at <a href='https://www.fws.gov/cbra/maps/index.html' target='_blank'><UND><CLR blue='255'>https://www.fws.gov/cbra/maps/index.html</CLR></UND></a>. All CBRS related data should be used in accordance with the layer metadata found on the CBRS Mapper website. \r\n\r\n The CBRS Buffer Zone represents the area immediately adjacent to the CBRS boundary where users are advised to contact the Service for an official determination (<a href='http://www.fws.gov/cbra/Determinations.html' target='_blank'><UND><CLR blue='255'>http://www.fws.gov/cbra/Determinations.html"+'</CLR></UND></a>) as to whether the property or project site is located "in" or "out" of the CBRS. \r\n\r\n CBRS Units normally extend seaward out to the 20- or 30-foot bathymetric contour (depending on the location of the unit). The true seaward extent of the units is not shown in the CBRS mapper.',a=new k;a.map=map;var n=new R;n.exportOptions={width:500,height:400,dpi:300},n.format="PDF",n.layout="Letter ANSI A Landscape CBRS Mapper V2",n.preserveScale=!1;var o=new _;o.layerId="cbrs",o.subLayerIds=[0,3,4];var s=$("#printTitle").val();""==s?n.layoutOptions={titleText:"CBRS",copyrightText:"This page was produced by the CBRS Mapper",legendLayers:[o],customTextElements:[{CustomText:i}]}:n.layoutOptions={titleText:s,copyrightText:"This page was produced by the CBRS Mapper",legendLayers:[o],customTextElements:[{CustomText:i}]};var r=n.layoutOptions.titleText;a.template=n;var l=new P("https://cbrsgis.wim.usgs.gov/arcgis/rest/services/Utilities/PrintingTools/GPServer/Export%20Web%20Map%20Task");l.execute(a,e,t)}function W(){function e(e){printCount++;var t=$("<p><label>"+printCount+': </label>&nbsp;&nbsp;<a href="'+e.url+'" target="_blank">'+n+" </a></p>");$("#printJobsVal").find("p.toRemove").remove(),$(".printJobs").append(t),$("#clearPrintJobs").css("display","inline"),$("#runValidation").button("reset"),infoPar=""}function t(e){$("#runValidation").button("reset"),alert("Sorry, an unclear print error occurred. Please try refreshing the application to fix the problem")}var i=new k;i.map=map;var a=new R;a.exportOptions={width:400,height:550,dpi:300},a.format="PDF",a.layout="Letter ANSI A Portrait CBRS Mapper V2_Prohibitions",a.preserveScale=!0,a.layoutOptions={titleText:userTitle,copyrightText:"This page was produced by the CBRS Mapper",legendLayers:[],scalebarUnit:"Feet",customTextElements:[{CustomText_info:infoPar},{CustomText_LatLong:latLong}]};var n=a.layoutOptions.titleText;i.template=a;var o=new P("https://cbrsgis.wim.usgs.gov/arcgis/rest/services/Utilities/PrintingTools/GPServer/Export%20Web%20Map%20Task");o.execute(i,e,t)}function Z(){ce.searchText=U.byId("searchText").value,le.execute(ce,J)}function J(e){if(e.length>0){var t=[],i=e[0].feature;t.push(i);var a=p.graphicsExtent(t);map.setExtent(a)}else $("#invalidSearchModal").modal("show")}function X(e,t){var i;document.getElementById&&(i=document.getElementById(e))&&i.style&&(i.style.cursor=t)}function K(e,t){var i=new m({x:t,y:e,spatialReference:{wkid:3857}}),a=new y({angle:0,xoffset:0,yoffset:12,type:"esriPMS",url:"https://static.arcgis.com/images/Symbols/Basic/RedStickpin.png",contentType:"image/png",width:30,height:30});map.graphics.add(new c(i,a)),document.getElementById("legendPoint").setAttribute("class","legendPtVisible"),$("#validationModal").modal("show");var n=M.xyToLngLat(t,e);latLong=String(Math.round(1e6*n[0])/1e6)+", "+String(Math.round(1e6*n[1])/1e6),ga("send","event","Validation","click",latLong),document.getElementById("selectPoint").setAttribute("class","btn btn-success btn-fixed")}function Q(){var e=new dojo.Deferred;return te(),setTimeout(function(){e.resolve("success")},1e3),e.promise}function ee(){map._layers.cbrs.visible||document.getElementById("cbrsSelector").click(),(19<=map.getLevel()||map.getLevel()<17)&&map.setLevel(17);var e=esri.graphicsExtent(map.graphics.graphics);map.setExtent(e),"hybrid"!=map._basemap&&document.getElementById("btnHybrid").click()}function te(){if(locDesc=document.getElementById("locationDesc").value.replace("&","&#38;"),userTitle=document.getElementById("locationDesc").value.replace("&","&#38;"),userName=document.getElementById("valName").value.replace("&","&#38;"),userCompany=document.getElementById("valCo").value.replace("&","&#38;"),""==locDesc&&(locDesc="N/A",userTitle="CBRS Documentation"),-1!=navigator.appVersion.indexOf("MSIE")||-1!=navigator.appVersion.indexOf("Trident"))var e=(new Date).toLocaleString("en-US",{timeZone:"UTC",timeZoneName:"short"});else var e=(new Date).toLocaleString("en-US",{timeZone:"America/New_York",timeZoneName:"short"});infoPar="<BOL>User Name: </BOL>"+userName+"\r\n",userCompany&&(infoPar+="<BOL>User Organization: </BOL>"+userCompany+"\r\n");var t=e.substr(0,e.indexOf(","));"Null"==suDate&&(suDate="N/A"),"Null"==fiDate&&(fiDate="N/A"),"in"==pinLoc?(pinLocDesc="Within Unit "+inUnit,"Otherwise Protected Area"==inUnitType?infoPar+="<BOL>User Supplied Address/Location Description: </BOL>"+locDesc+"\r\n <BOL>Pin Location: </BOL>"+pinLocDesc+"\r\n<BOL>Pin Flood Insurance Prohibition Date: </BOL>"+fiDate+"\r\n <BOL>Pin System Unit Establishment Date: </BOL>"+suDate+"\r\n \r\nThe user placed pin is within Otherwise Protected Area (OPA) Unit "+inUnit+" of the CBRS.  For the official map depicting this area, please see the map numbered "+mapNo+", dated "+mapDate+". The official CBRS maps are accessible at <UND><CLR blue='255'><a target='_blank' href='https://www.fws.gov/cbra/maps/index.html'>https://www.fws.gov/cbra/maps/index.html</a></CLR></UND>. \r\n \r\nThe Coastal Barrier Improvement Act (Pub. L. 101-591; 42 U.S.C. &#167; 4028) prohibits most new federal flood insurance within OPAs, with an exception for structures that are used in a manner consistent with the purpose for which the area is protected (e.g., park visitors center, park restroom facilities, etc.). \r\n \r\n<BOL>The prohibition on federal flood insurance for this pin location took effect on "+fiDate+". Federal flood insurance through the National Flood Insurance Program is available if the subject building was constructed (or permitted and under construction) before the area's flood insurance prohibition date, and has not been substantially improved or substantially damaged since.</BOL> For more information about the restrictions on federal flood insurance, please refer to the Federal Emergency Management Agency's (FEMA) regulations in Title 44 Part 71 of the Code of Federal Regulations and FEMA's Flood Insurance Manual: <UND><CLR blue='255'><a target='_blank' href='https://www.fema.gov/flood-insurance-manual'>https://www.fema.gov/flood-insurance-manual</a></CLR></UND>.\r\n \r\n":"System Unit"==inUnitType&&(infoPar+="<BOL>User Supplied Address/Location Description: </BOL>"+locDesc+"\r\n <BOL>Pin Location: </BOL>"+pinLocDesc+"\r\n<BOL>Pin Flood Insurance Prohibition Date: </BOL>"+fiDate+"\r\n <BOL>Pin System Unit Establishment Date: </BOL>"+suDate+"\r\n \r\nThe user placed pin location is within System Unit "+inUnit+" of the CBRS.  For the official CBRS map depicting this area, please see the map numbered "+mapNo+", dated "+mapDate+". The official CBRS maps are accessible at <UND><CLR blue='255'><a target='_blank' href='https://www.fws.gov/cbra/maps/index.html'>https://www.fws.gov/cbra/maps/index.html</a></CLR></UND>. \r\n \r\nThe Coastal Barrier Resources Act (Pub. L. 97-348) and subsequent amendments (16 U.S.C. &#167; 3501 et seq.) prohibit most new federal funding and financial assistance within System Units, including flood insurance. \r\n \r\n<BOL>The prohibition on federal flood insurance for this pin location took effect on "+fiDate+". Federal flood insurance through the National Flood Insurance Program is available if the subject building was constructed (or permitted and under construction) before the area's flood insurance prohibition date, and has not been substantially improved or substantially damaged since.</BOL> For more information about the restrictions on federal flood insurance, please refer to the Federal Emergency Management Agency's (FEMA) regulations in Title 44 Part 71 of the Code of Federal Regulations and FEMA's Flood Insurance Manual: <UND><CLR blue='255'><a target='_blank' href='https://www.fema.gov/flood-insurance-manual'>https://www.fema.gov/flood-insurance-manual</a></CLR></UND>. The prohibition on all other federal expenditures and financial assistance (besides flood insurance) for this pin location took effect on "+suDate+".\r\n \r\n")):"buff"==pinLoc?(pinLocDesc="Within CBRS Buffer Zone",fiDate="Undetermined",suDate="Undetermined",infoPar+="<BOL>User Supplied Address/Location Description: </BOL>"+locDesc+"\r\n <BOL>Pin Location: </BOL>"+pinLocDesc+"\r\n<BOL>Pin Flood Insurance Prohibition Date: </BOL>"+fiDate+"\r\n <BOL>Pin System Unit Establishment Date: </BOL>"+suDate+"\r\n \r\nThe user placed pin location is within the CBRS Buffer Zone. The CBRS Buffer Zone represents the area immediately adjacent to the CBRS boundary where users are advised to contact the Service for an official determination as to whether the property or project site is located \"in\" or \"out\" of the CBRS. For information on obtaining an official CBRS Property Determination, please visit: <UND><CLR blue='255'><a target='_blank' href='http://www.fws.gov/cbra/Determinations.html'>https://www.fws.gov/cbra/documentation.html.</a></CLR></UND> \r\n \r\n"):"out"==pinLoc&&(pinLocDesc="Outside CBRS",infoPar+=""==mapNo?"<BOL>User Supplied Address/Location Description: </BOL>"+locDesc+"\r\n <BOL>Pin Location: </BOL>"+pinLocDesc+"\r\n<BOL>Pin Flood Insurance Prohibition Date: </BOL>"+fiDate+"\r\n <BOL>Pin System Unit Establishment Date: </BOL>"+suDate+"\r\n \r\nThe user placed pin location is not within the CBRS. The official CBRS maps are accessible at <UND><CLR blue='255'><a target='_blank' href='https://www.fws.gov/cbra/maps/index.html'> https://www.fws.gov/cbra/maps/index.html</a></CLR></UND>. \r\n \r\n":"<BOL>User Supplied Address/Location Description: </BOL>"+locDesc+"\r\n <BOL>Pin Location: </BOL>"+pinLocDesc+"\r\n<BOL>Pin Flood Insurance Prohibition Date: </BOL>"+fiDate+"\r\n <BOL>Pin System Unit Establishment Date: </BOL>"+suDate+"\r\n \r\nThe user placed pin location is not within the CBRS. For the nearest official CBRS map depicting this area, please see the map numbered "+mapNo+", dated "+mapDate+". The official CBRS maps are accessible at <UND><CLR blue='255'><a target='_blank' href='https://www.fws.gov/cbra/maps/index.html'> https://www.fws.gov/cbra/maps/index.html</a></CLR></UND>. \r\n \r\n"),infoPar+='<FNT size="8">The CBRS information is derived directly from the CBRS web service provided by the Service. This map was exported on '+t+" and does not reflect changes or amendments subsequent to this date.  The CBRS boundaries on this map may become superseded by new boundaries over time. \r\n \r\nThis map image may be void if one or more of the following map elements do not appear: basemap imagery, CBRS unit labels, prohibition date labels, legend, scale bar, map creation date. For additional information about flood insurance and the CBRS, visit: <UND><CLR blue='255'><a target='_blank' href='https://www.fws.gov/cbra/Flood-Insurance.html'>https://www.fws.gov/cbra/Flood-Insurance.html</a></CLR></UND>.</FNT> \r\n"}var ie=new h("https://services.arcgisonline.com/arcgis/rest/services/Reference/World_Transportation/MapServer");i.defaults.io.corsEnabledServers.push("fwsprimary.wim.usgs.gov"),i.defaults.geometryService=new S("https://fwsmapper.wim.usgs.gov/arcgis/rest/services/Utilities/Geometry/GeometryServer"),map=new e("mapDiv",{basemap:"hybrid",extent:new d(-14638882.654811008,2641706.3772205533,-6821514.898031538,6403631.161302788,new f({wkid:3857}))});var ae=new n({map:map,extent:new d(-14638882.654811008,2641706.3772205533,-6821514.898031538,6403631.161302788,new f({wkid:3857}))},"homeButton");ae.startup();var ne=new s({map:map,scale:4514},"locateButton");ne.startup(),measurement=new r({map:map,advancedLocationUnits:!0},U.byId("measurementDiv")),measurement.startup(),$(window).resize(function(){$("#legendCollapse").hasClass("in")?(maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("max-height",maxLegendHeight),maxLegendDivHeight=$("#legendElement").height(),$("#legendDiv").css("max-height",maxLegendDivHeight)):$("#legendElement").css("height","initial");var e=.8*$(window).height();$("#disclaimerModal .modal-content").css("max-height",e),$("#validationModal .modal-content").css("max-height",e)});var oe=.8*$(window).height();$("#disclaimerModal .modal-content").css("max-height",oe),$("#validationModal .modal-content").css("max-height",oe),$("#printNavButton").click(function(){V()}),$("#printExecuteButton").click(function(e){e.preventDefault(),$(this).button("loading"),Y()}),$("#clearPoint").click(function(){map.graphics.clear(),document.getElementById("selectPoint").setAttribute("class","btn btn-default btn-fixed"),document.getElementById("legendPoint").setAttribute("class","legendPt"),document.getElementById("runValidation").disabled=!0}),$("#clearPrintJobs").click(function(){$(".printJobs").html('<p class="toRemove"> No print jobs yet</p><br>'),$("#clearPrintJobs").css("display","none")}),$("#getDataButton").click(function(){G()}),$("#valName").change(function(e){graphPoint=map.graphics.graphics[0],""!==e.target.value&&""!==document.getElementById("locationDesc").value&&graphPoint&&"point"==graphPoint.geometry.type?document.getElementById("runValidation").disabled=!1:document.getElementById("runValidation").disabled=!0}),$("#locationDesc").change(function(e){graphPoint=map.graphics.graphics[0],""!==e.target.value&&""!==document.getElementById("valName").value&&graphPoint&&"point"==graphPoint.geometry.type?document.getElementById("runValidation").disabled=!1:document.getElementById("runValidation").disabled=!0}),j(map,"load",function(){var e=map.getScale().toFixed(0);$("#scale")[0].innerHTML=addCommas(e);var t=M.webMercatorToGeographic(map.extent.getCenter());$("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3)),map.addLayer(ie,1)}),j(map,"zoom-end",function(){var e=map.getScale().toFixed(0),t=map.getLayer("cbrs").opacity;$("#scale")[0].innerHTML=addCommas(e),e>1e5&&.75!=t?(map.getLayer("cbrs").setOpacity(.75),console.log($("#slider")),$("#slider")&&($("#opacityValue").text("Opacity: 0.75"),$("#slider").val(75))):1e5>e&&.5!=t&&(map.getLayer("cbrs").setOpacity(.5),console.log($("#slider")),$("#slider")&&($("#slider").val(50),$("#opacityValue").text("Opacity: 0.5")))}),j(map,"mouse-move",function(e){if($("#mapCenterLabel").css("display","none"),null!=e.mapPoint){var t=M.webMercatorToGeographic(e.mapPoint);$("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3))}}),j(map,"pan-end",function(){$("#mapCenterLabel").css("display","inline");var e=M.webMercatorToGeographic(map.extent.getCenter());$("#latitude").html(e.y.toFixed(3)),$("#longitude").html(e.x.toFixed(3))});var se=new h("https://server.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer"),re=(new h("https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer"),new h("https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer"));j(U.byId("btnStreets"),"click",function(){H(),map.setBasemap("streets")}),j(U.byId("btnGray"),"click",function(){H(),map.setBasemap("gray")}),j(U.byId("btnUsgsImgTopo"),"click",function(){H(),map.setBasemap("satellite"),map.addLayer(re,0)}),j(U.byId("btnUsgsTopo"),"click",function(){H(),map.addLayer(se,0)}),j(U.byId("btnHybrid"),"click",function(){H(),map.setBasemap("hybrid"),map.addLayer(ie,1)}),identifyParams=new B,identifyParams.tolerance=0,identifyParams.returnGeometry=!0,identifyParams.layerOption=B.LAYER_OPTION_ALL,identifyParams.layerIds=[0,1,3,5],identifyParams.spatialReference=map.spatialReference,identifyParams.width=map.width,identifyParams.height=map.height,identifyTask=new x("https://cbrsgis.wim.usgs.gov/arcgis/rest/services/CoastalBarrierResourcesSystem/MapServer"),$("#selectionDiv").lobiPanel({unpin:!1,reload:!1,minimize:!1,close:!1,expand:!1,editTitle:!1,maxWidth:800,maxHeight:500}),$("#selectionDiv .dropdown").prepend("<div id='selectionClose' tite='close'><b>X</b></div>"),$("#selectionMin").click(function(){$("#selectionDiv").css("visibility","hidden")}),$("#selectionClose").click(function(){$("#selectionDiv").css("visibility","hidden"),map.graphics.clear()}),$("#selectionDiv").on("resizeStop.lobiPanel",function(e,t){$(".panel-group").css("height",$("#selectionDiv").height()-55)}),$("#selectionDiv").on("loaded.lobiPanel",function(e,t){$(".panel-group").css("height",$("#selectionDiv").height()-55)}),$("#selectPoint").click(function(){map.graphics.clear(),selectPointonMap=!0,$("#validationModal").modal("hide")}),$("#runValidation").click(function(e){e.preventDefault(),ee(),$(this).button("loading");var t=Q();t.then(function(e){W()})}),$("#bufferDiv").lobiPanel({unpin:!1,reload:!1,minimize:!1,close:!1,expand:!1,editTitle:!1}),$("#bufferDiv .dropdown").prepend("<div id='bufferClose' tite='close'><b>X</b></div>"),$("#bufferClose").click(function(){$("#bufferDiv").css("visibility","hidden")}),j(map,"click",function(e){if(1==cbrsClicked)return void(cbrsClicked=!1);if(1==bufferClicked)return void(bufferClicked=!1);if(null==measurement.activeTool&&(map.graphics.clear(),document.getElementById("selectPoint").setAttribute("class","btn btn-default btn-fixed"),identifyParams.geometry=e.mapPoint,identifyParams.mapExtent=map.extent,map.getLevel())){identifyTask=new x("https://cbrsgis.wim.usgs.gov/arcgis/rest/services/CoastalBarrierResourcesSystem/MapServer");var t=identifyTask.execute(identifyParams);X("mainDiv"),t.addCallback(function(t){if(0===t.length||selectPointonMap){if(selectPointonMap)if(map.getLevel()<16)alert("Please zoom in closer to select a point on the map.");else{map.graphics.clear(),long=e.mapPoint.x.toString(),lat=e.mapPoint.y.toString(),inUnit="",inUnitType="",fiDate="N/A",suDate="N/A",pinLoc="out",mapDate="",mapNo="",locDesc="";var i=!1;if(t.length>0)for(var a=0;a<t.length;a++)"CBRS Prohibitions"!=t[a].layerName||i?"CBRS Buffer Zone"==t[a].layerName?(i=!0,pinLoc="buff"):"CBRS Map Panels"==t[a].layerName&&(mapDate=t[a].feature.attributes.Map_Date,mapNo=t[a].feature.attributes.Panel_No):(inUnit=t[a].feature.attributes.Unit,inUnitType=t[a].feature.attributes.CBRS_Type,fiDate=t[a].feature.attributes.FI_Date,suDate=t[a].feature.attributes.SU_Date,pinLoc="in");K(lat,long),selectPointonMap=!1,""===document.getElementById("valName").value||""===document.getElementById("locationDesc").value?document.getElementById("runValidation").disabled=!0:document.getElementById("runValidation").disabled=!1}}else{document.getElementById("legendPoint").setAttribute("class","legendPt");var n,o,s;for(a=0;a<t.length;a++)"CBRS Units"==t[a].layerName&&(containsUnit=!0,s=t[a].feature.attributes.Unit);for(var a=0;a<t.length;a++){n=t[a].feature,o=n.attributes;var r;if("CBRS Units"==t[a].layerName){if($("#unitId").text(o.Unit),$("#unitName").text(o.Name),$("#unitType").text(o.Unit_Type),o.Fast_Acres||""!==o.Wet_Acres){var l;l=Number(o.Fast_Acres)+Number(o.Wet_Acres)||"Data not available at this time"}$("#totalAcre").text(addCommas(l)),r=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([255,225,0]),2),new dojo.Color([98,194,204,0])),n.geometry.spatialReference=map.spatialReference;var c=n;c.setSymbol(r),map.graphics.add(c),$("#selectionDiv").css("visibility","visible");var p=$("#selectionDiv").data("lobiPanel"),d=$(document).height(),u=$(document).width(),m=.5*u-.5*$("#selectionDiv").width(),h=.8*d-1*$("#selectionDiv").height();$(".panel-group").css("height",$("#selectionDiv").height()-55),p.setPosition(m,h),1==p.isPinned()&&p.unpin()}else if("CBRS Map Panels"==t[a].layerName&&-1!=t[a].feature.attributes.Title.search(s)){$("#mapLink").html('<a href="'+o.Map_Link+'" target="_blank">Click here for official CBRS map</a>'),$("#mapDate").text(o.Map_Date),$("#titleOne").text(o.Title),$("#titleTwo").html(o.Title_2),$("#titleThree").text(o.Title_3),$("#titleFour").text(o.Title_4),r=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([255,0,225]),2),new dojo.Color([98,194,204,0])),"Null"==o.Title_2?($("#titleTwo").hide(o.Title_2),$(".hideNullTwo").hide()):($("#titleTwo").show(o.Title_2),$(".hideNullTwo").show()),"Null"==o.Title_3?($("#titleThree").hide(o.Title_3),$(".hideNullThree").hide()):($("#titleThree").show(o.Title_3),$(".hideNullThree").show()),"Null"==o.Title_4?($("#titleFour").hide(o.Title_4),$(".hideNullFour").hide()):($("#titleFour").show(o.Title_4),$(".hideNullFour").show()),n.geometry.spatialReference=map.spatialReference;var c=n;c.setSymbol(r),map.graphics.add(c)}else if("CBRS Map Panels"==t[a].layerName&&-1!=t[a].feature.attributes.Title_2.search(s)){$("#mapLink").html('<a href="'+o.Map_Link+'" target="_blank">Click here for official CBRS map</a>'),$("#mapDate").text(o.Map_Date),$("#titleOne").text(o.Title),$("#titleTwo").html(o.Title_2),$("#titleThree").text(o.Title_3),$("#titleFour").text(o.Title_4),r=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([255,0,225]),2),new dojo.Color([98,194,204,0])),"Null"==o.Title_2?($("#titleTwo").hide(o.Title_2),$(".hideNullTwo").hide()):($("#titleTwo").show(o.Title_2),$(".hideNullTwo").show()),"Null"==o.Title_3?($("#titleThree").hide(o.Title_3),$(".hideNullThree").hide()):($("#titleThree").show(o.Title_3),$(".hideNullThree").show()),"Null"==o.Title_4?($("#titleFour").hide(o.Title_4),$(".hideNullFour").hide()):($("#titleFour").show(o.Title_4),$(".hideNullFour").show()),n.geometry.spatialReference=map.spatialReference;var c=n;c.setSymbol(r),map.graphics.add(c)}else if("CBRS Map Panels"==t[a].layerName&&-1!=t[a].feature.attributes.Title_3.search(s)){$("#mapLink").html('<a href="'+o.Map_Link+'" target="_blank">Click here for official CBRS map</a>'),$("#mapDate").text(o.Map_Date),$("#titleOne").text(o.Title),$("#titleTwo").html(o.Title_2),$("#titleThree").text(o.Title_3),$("#titleFour").text(o.Title_4),r=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([255,0,225]),2),new dojo.Color([98,194,204,0])),"Null"==o.Title_2?($("#titleTwo").hide(o.Title_2),$(".hideNullTwo").hide()):($("#titleTwo").show(o.Title_2),$(".hideNullTwo").show()),"Null"==o.Title_3?($("#titleThree").hide(o.Title_3),$(".hideNullThree").hide()):($("#titleThree").show(o.Title_3),$(".hideNullThree").show()),"Null"==o.Title_4?($("#titleFour").hide(o.Title_4),$(".hideNullFour").hide()):($("#titleFour").show(o.Title_4),$(".hideNullFour").show()),n.geometry.spatialReference=map.spatialReference;var c=n;c.setSymbol(r),map.graphics.add(c)}else if("CBRS Map Panels"==t[a].layerName&&-1!=t[a].feature.attributes.Title_4.search(s)){$("#mapLink").html('<a href="'+o.Map_Link+'" target="_blank">Click here for official CBRS map</a>'),$("#mapDate").text(o.Map_Date),$("#titleOne").text(o.Title),$("#titleTwo").html(o.Title_2),$("#titleThree").text(o.Title_3),$("#titleFour").text(o.Title_4),r=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([255,0,225]),2),new dojo.Color([98,194,204,0])),"Null"==o.Title_2?($("#titleTwo").hide(o.Title_2),$(".hideNullTwo").hide()):($("#titleTwo").show(o.Title_2),$(".hideNullTwo").show()),"Null"==o.Title_3?($("#titleThree").hide(o.Title_3),$(".hideNullThree").hide()):($("#titleThree").show(o.Title_3),$(".hideNullThree").show()),"Null"==o.Title_4?($("#titleFour").hide(o.Title_4),$(".hideNullFour").hide()):($("#titleFour").show(o.Title_4),$(".hideNullFour").show()),n.geometry.spatialReference=map.spatialReference;var c=n;c.setSymbol(r),map.graphics.add(c)}else if("CBRS Prohibitions"==t[a].layerName&&n){var g=o.SU_Date;"Null"==g&&(g="N/A"),$("#FIDate").text(o.FI_Date),$("#SUDate").text(g)}if(0==t[a].layerId){r=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,0,0]),2),new dojo.Color([0,0,0,0])),$("#bufferDiv").css("visibility","visible");var p=$("#bufferDiv").data("lobiPanel"),d=$(document).height(),u=$(document).width(),m=.5*u-.5*$("#bufferDiv").width(),h=.8*d-1*$("#bufferDiv").height();p.setPosition(m,h),1==p.isPinned()&&p.unpin(),$("#bufferDiv").css("visibility","visible")&&$("#selectionDiv").modal("hide")}}X("mainDiv","default"),map.setCursor("default")}})}}),map.on("load",function(){map.infoWindow.set("highlight",!1),map.infoWindow.set("titleInBody",!1),$("#disclaimerModal").modal("show")});var le=new T("https://cbrsgis.wim.usgs.gov/arcgis/rest/services/CoastalBarrierResourcesSystem/MapServer"),ce=new D;ce.layerIds=[3],ce.searchFields=["Unit"],ce.outSpatialReference=map.spatialReference,ce.returnGeometry=!0,console.log("find unit:",ce.outSpatialReference),$("#btnUnitSearch").click(Z),search_api.create("geosearch",{on_result:function(e){require(["esri/geometry/Extent"],function(t){var i=["GNIS_MAJOR","GNIS_MINOR","ZIPCODE","AREACODE"],a=i.indexOf(e.result.properties.Source);$("#geosearchModal").modal("hide"),-1==a?map.setExtent(new esri.geometry.Extent({xmin:e.result.properties.LonMin,ymin:e.result.properties.LatMin,xmax:e.result.properties.LonMax,ymax:e.result.properties.LatMax,spatialReference:{wkid:4326}}),!0):require(["esri/geometry/Point"],function(t){map.centerAndZoom(new t(e.result.properties.Lon,e.result.properties.Lat),12)})})},include_usgs_sw:!0,include_usgs_gw:!0,include_usgs_sp:!0,include_usgs_at:!0,include_usgs_ot:!0,include_huc2:!0,include_huc4:!0,include_huc6:!0,include_huc8:!0,include_huc10:!0,include_huc12:!0}),$(document).ready(function(){function e(){$("#geosearchModal").modal("show")}function t(){$("#aboutModal").modal("show"),$("")}$("#geosearchNav").click(function(){e()}),$(".showAboutModal").click(function(){$("#contactTob").modal("hide"),$("#aboutModal").modal("show"),
$("#aboutTab").trigger("click")}),$("#aboutNav").click(function(){t()}),$("#html").niceScroll(),$("#sidebar").niceScroll(),$("#sidebar").scroll(function(){$("#sidebar").getNiceScroll().resize()}),maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("max-height",maxLegendHeight),$("#measurementCollapse").on("shown.bs.collapse",function(){$("#measureLabel").show()}),$("#measurementCollapse").on("hide.bs.collapse",function(){window.innerWidth<=767&&$("#measureLabel").hide()})}),$(document).ready(function(){function e(){$("#cbrsModal").modal("show")}$("#cbrsNav").click(function(){e()})}),$(document).ready(function(){}),$(document).ready(function(){}),$(document).ready(function(){$("#validationNav").click(function(){$("#validationModal").modal("show"),graphPoint=map.graphics.graphics[0],""!==document.getElementById("locationDesc").value&&""!==document.getElementById("valName").value&&graphPoint&&"point"==graphPoint.geometry.type||(document.getElementById("runValidation").disabled=!0)})}),require(["esri/InfoTemplate","esri/tasks/locator","esri/tasks/query","esri/tasks/QueryTask","esri/graphicsUtils","esri/geometry/Point","esri/geometry/Extent","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ArcGISImageServiceLayer","esri/layers/FeatureLayer","esri/layers/WMSLayer","esri/layers/WMSLayerInfo","esri/tasks/GeometryService","dijit/form/CheckBox","dijit/form/RadioButton","dojo/query","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/on"],function(e,t,i,a,n,s,r,l,c,p,d,u,m,h,g,f,y,b,v,w,S){function L(e,t,i,a,n,s,r){if(map.addLayer(i),T.push([n,camelize(a),i]),$(function(){if(0==legendDiv.innerHTML.length){var e=new o({map:map,layerInfos:legendLayers},"legendDiv");e.startup(),$("#legendDiv").niceScroll()}}),n){if(!$("#"+camelize(n)).length){var l;if("Data Source"==n)var l=$('<div id="'+camelize(n+" Root")+'" class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+n+'<span id="info'+camelize(n)+'" title="Data Source identifies the scale, year and emulsion of the imagery that was used to map the wetlands and riparian areas for a given area. It also identifies areas that have Scalable data, which is an interim data product in areas of the nation where standard compliant wetland data is not yet available. Click for more info on Scalable data." class="glyphspan glyphicon glyphicon-question-sign pull-right"></span><span id="opacity'+camelize(n)+'" style="padding-right: 5px" class="glyphspan glyphicon glyphicon-adjust pull-right"></span></button> </div>');else var l=$('<div id="'+camelize(n+" Root")+'" class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+n+"</button> </div>");l.click(function(e){l.find("i.glyphspan").toggleClass("fa-check-square-o fa-square-o"),$.each(T,function(e,t){var i=map.getLayer(t[2].id);if(t[0]==n)if($("#"+t[1]).find("i.glyphspan").hasClass("fa-dot-circle-o")&&l.find("i.glyphspan").hasClass("fa-check-square-o")){console.log("adding layer: ",t[1]),map.addLayer(t[2]);var i=map.getLayer(t[2].id);i.setVisibility(!0)}else if(l.find("i.glyphspan").hasClass("fa-square-o")){console.log("removing layer: ",t[1]);var i=map.getLayer(t[2].id);i.setVisibility(!1)}})});var c=$('<div id="'+camelize(n)+'" class="btn-group-vertical" data-toggle="buttons"></div>');$("#toggle").append(c)}if(i.visible)var p=$('<div id="'+camelize(a)+'" class="btn-group-vertical lyrTog radioTog" style="cursor: pointer;" data-toggle="buttons"> <label class="btn btn-default"  style="font-weight: bold;text-align: left"> <input type="radio" name="'+camelize(n)+'" autocomplete="off"><i class="glyphspan fa fa-dot-circle-o '+camelize(n)+'"></i>&nbsp;&nbsp;'+a+"</label> </div>");else var p=$('<div id="'+camelize(a)+'" class="btn-group-vertical lyrTog radioTog" style="cursor: pointer;" data-toggle="buttons"> <label class="btn btn-default"  style="font-weight: bold;text-align: left"> <input type="radio" name="'+camelize(n)+'" autocomplete="off"><i class="glyphspan fa fa-circle-o '+camelize(n)+'"></i>&nbsp;&nbsp;'+a+"</label> </div>");$("#"+camelize(n)).append(p),p.click(function(e){if($(this).find("i.glyphspan").hasClass("fa-circle-o")){$(this).find("i.glyphspan").toggleClass("fa-dot-circle-o fa-circle-o");var t=$(this)[0].id;$.each(T,function(e,i){if(i[0]==n)if(i[1]==t&&$("#"+camelize(n+" Root")).find("i.glyphspan").hasClass("fa-check-square-o")){console.log("adding layer: ",i[1]),map.addLayer(i[2]);var a=map.getLayer(i[2].id);a.setVisibility(!0)}else if(i[1]==t&&$("#"+camelize(n+" Root")).find("i.glyphspan").hasClass("fa-square-o"))console.log("group heading not checked");else{console.log("removing layer: ",i[1]);var a=map.getLayer(i[2].id);a.setVisibility(!1),$("#"+i[1]).find("i.glyphspan").hasClass("fa-dot-circle-o")&&$("#"+i[1]).find("i.glyphspan").toggleClass("fa-dot-circle-o fa-circle-o")}})}})}else if(r.includeInLayerList){if(i.visible&&r.hasOpacitySlider)var p=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left" id='+i.id+'Selector><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+a+'<span id="opacity'+camelize(a)+'" style="padding-right: 5px" class="glyphspan glyphicon glyphicon-adjust pull-right"></span></button></div>');else if(!i.visible&&r.hasOpacitySlider)var p=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+a+'<span id="info'+camelize(a)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></span><span id="opacity'+camelize(a)+'" style="padding-right: 5px" class="glyphspan glyphicon glyphicon-adjust pull-right"></span></button></div>');else if(i.visible&&void 0!==r.hasOpacitySlider&&1==r.hasOpacitySlider)var p=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+a+'<span id="info'+camelize(a)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></button></span></div>');else if(i.visible||void 0===r.hasOpacitySlider||1!=r.hasOpacitySlider)if(i.visible)var p=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+a+'<span id="info'+camelize(a)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></span><span id="opacity'+camelize(a)+'" class="glyphspan glyphicon glyphicon-adjust pull-right"></button></span></div>');else if(i.visible)if(i.visible)var p=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+a+"</button></span></div>");else var p=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+a+"</button> </div>");else var p=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+a+'<span id="info'+camelize(a)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></button></span></div>');else var p=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+a+'<span id="info'+camelize(a)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></span><span id="opacity'+camelize(a)+'" class="glyphspan glyphicon glyphicon-adjust pull-right"></button></span></div>');p.click(function(e){$(this).find("i.glyphspan").toggleClass("fa-check-square-o fa-square-o"),$(this).find("button").button("toggle"),i.visible?i.setVisibility(!1):i.setVisibility(!0),r.otherLayersToggled&&$.each(r.otherLayersToggled,function(e,t){var a=map.getLayer(t);a.setVisibility(i.visible)})})}if(void 0!==t){var d=camelize(e);if(!$("#"+d).length){if(t)var u=$('<div id="'+d+'"><div class="alert alert-info" role="alert"><strong>'+e+"</strong></div></div>");else var u=$('<div id="'+d+'"></div>');$("#toggle").append(u)}if(n){if($("#"+d).append(l),$("#"+d).append(c),void 0!==r.moreinfo&&r.moreinfo){var m="#info"+camelize(n),h=$(m);h.click(function(e){window.open(r.moreinfo,"_blank"),e.preventDefault(),e.stopPropagation()})}if($("#opacity"+camelize(n)).length>0){var m="#opacity"+camelize(n),g=$(m);g.click(function(e){e.preventDefault(),e.stopPropagation(),$(".opacitySlider").remove();var t=map.getLayer(s.id).opacity,i=$('<div class="opacitySlider"><label id="opacityValue">Opacity: '+t+'</label><label class="opacityClose pull-right">X</label><input id="slider" type="range"></div>');$("body").append(i),$("#slider")[0].value=100*t,$(".opacitySlider").css("left",event.clientX-180),$(".opacitySlider").css("top",event.clientY-50),$(".opacitySlider").mouseleave(function(){$(".opacitySlider").remove()}),$(".opacityClose").click(function(){$(".opacitySlider").remove()}),$("#slider").change(function(e){var t=$("#slider")[0].value/100;console.log("o: "+t),$("#opacityValue").html("Opacity: "+t),map.getLayer(s.id).setOpacity(t),r.otherLayersToggled&&$.each(r.otherLayersToggled,function(e,i){var a=map.getLayer(i);a.setOpacity(t)})})})}}else $("#"+d).append(p),$("#opacity"+camelize(a)).length>0&&$("#opacity"+camelize(a)).click(function(e){e.preventDefault(),e.stopPropagation(),$(".opacitySlider").remove();var t=map.getLayer(s.id).opacity,i=$('<div class="opacitySlider"><label id="opacityValue">Opacity: '+t+'</label><label class="opacityClose pull-right">X</label><input id="slider" type="range"></div>');$("body").append(i),$("#slider")[0].value=100*t,$(".opacitySlider").css("left",event.clientX-180),$(".opacitySlider").css("top",event.clientY-50),$(".opacitySlider").mouseleave(function(){$(".opacitySlider").remove()}),$(".opacityClose").click(function(){$(".opacitySlider").remove()}),$("#slider").change(function(e){var t=$("#slider")[0].value/100;console.log("o: "+t),$("#opacityValue").html("Opacity: "+t),map.getLayer(s.id).setOpacity(t),r.otherLayersToggled&&$.each(r.otherLayersToggled,function(e,i){var a=map.getLayer(i);a.setOpacity(t)})})})}else if($("#toggle").append(p),void 0!==r.moreinfo&&r.moreinfo){var m="#info"+camelize(a),h=$(m);h.click(function(e){alert(e.currentTarget.id),e.preventDefault(),e.stopPropagation()})}}var T=(new m("https://fwsmapper.wim.usgs.gov/arcgis/rest/services/Utilities/Geometry/GeometryServer"),[]);$.each(allLayers,function(e,t){console.log("processing: ",t.groupHeading),$.each(t.layers,function(e,i){var a="";if(i.wimOptions.exclusiveGroupName)a=i.wimOptions.exclusiveGroupName;else if("agisDynamic"===i.wimOptions.layerType){var n=new l(i.url,i.options);if(i.visibleLayers&&n.setVisibleLayers(i.visibleLayers),i.wimOptions&&i.wimOptions.layerDefinitions){var o=[];$.each(i.wimOptions.layerDefinitions,function(e,t){o[e]=t}),n.setLayerDefinitions(o)}i.wimOptions&&1==i.wimOptions.includeLegend&&legendLayers.unshift({layer:n,title:e}),L(t.groupHeading,t.showGroupHeading,n,e,a,i.options,i.wimOptions)}})})})}),$(".close-alert").click(function(){$(this).parent().slideUp(250)}),$(document).ready(function(){}),$(function(){$('[data-toggle="tooltip"]').tooltip({selector:"",placement:"top",container:"body",html:!0,delay:{show:0,hide:600}})});