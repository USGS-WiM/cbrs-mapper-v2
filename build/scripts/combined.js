function addCommas(e){e+="";for(var t=e.split("."),i=t[0],a=t.length>1?"."+t[1]:"",n=/(\d+)(\d{3})/;n.test(i);)i=i.replace(n,"$1,$2");return i+a}function camelize(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")}function stateSelected(){var e=$("#stateSelect")[0];if(e.selectedIndex>0){var t=e.options[e.selectedIndex].value,i=e.options[e.selectedIndex].label;$("#downloadState").html("Download <a target='_blank' href='http://www.fws.gov/wetlands/Downloads/State/"+t+"_wetlands.zip'>Geodatabase</a> and <a target='_blank' href='http://www.fws.gov/wetlands/Downloads/State/"+t+"_shapefile_wetlands.zip'>Shapefile</a> data for <b>"+i+"</b>")}else $("#downloadState").html("")}function hucLinkListener(e){console.log(e),$.get("https://fwsmapper.wim.usgs.gov/downloadLoggingService/downloadLog.asmx/Log?huc="+e+",NWIV2",function(e){})}function message(){document.getElementById("helpfulHint").innerHTML="<hr>Click the tool again to deselect it and return to normal map controls"}var allLayers,renderer;require(["esri/InfoTemplate","esri/renderers/UniqueValueRenderer","esri/symbols/PictureMarkerSymbol","dojo/domReady!"],function(e,t,i){var a=new i("./images/grn-pushpin.png",45,45);renderer=new t(a);new e("${NAME}","Type: ${TYPE}<br/>Ramsar: <a id='ramsarLink' target='_blank' href='${HYPERLINK_2}'>click here</a><br/>Location Website: <a target='_blank' href='${HYPERLINK}'>click here</a><br/>Water Summary Report: <a target='_blank' href='${WATER_SUMMARY_REPORT}'>click here</a><br/>Wildlife Action Plan: <a target='_blank' href='${STATE_ACTION_PLAN}'>click here</a><br/>");allLayers=[{groupHeading:"ESRI dynamic map services",showGroupHeading:!1,includeInLayerList:!0,layers:{"CBRS Units":{url:"https://fwsprimary.wim.usgs.gov/server/rest/services/CBRAMapper/GeoCBRA/MapServer",visibleLayers:[2,4,5],options:{id:"cbrs",opacity:.75,visible:!0},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,moreinfo:"http://www.fws.gov/wetlands/Data/Wetlands-V2-Product-Summary.html",includeLegend:!0}},"CBRS Footprints":{url:"https://fwsprimary.wim.usgs.gov/server/rest/services/CBRAMapper/GeoCBRA/MapServer",visibleLayers:[0],options:{id:"footprints",opacity:.75,visible:!1},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!1,zoomScale:144448,hasOpacitySlider:!0,includeLegend:!1}},two:{url:"https://fwsprimary.wim.usgs.gov/server/rest/services/CBRAMapper/GeoCBRA/MapServer",visibleLayers:[2],options:{id:"footprints",opacity:.75,visible:!0},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!1,zoomScale:144448,hasOpacitySlider:!0,includeLegend:!1}},four:{url:"https://fwsprimary.wim.usgs.gov/server/rest/services/CBRAMapper/GeoCBRA/MapServer",visibleLayers:[4],options:{id:"footprints",opacity:.75,visible:!0},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!1,zoomScale:144448,hasOpacitySlider:!0,includeLegend:!1}},five:{url:"https://fwsprimary.wim.usgs.gov/server/rest/services/CBRAMapper/GeoCBRA/MapServer",visibleLayers:[5],options:{id:"footprints",opacity:.75,visible:!0},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!1,zoomScale:144448,hasOpacitySlider:!0,includeLegend:!1}},"CBRS Prohibitions":{url:"https://fwsprimary.wim.usgs.gov/server/rest/services/CBRAMapper/CBRS_Prohibitions_Test/MapServer",visibleLayers:[6],options:{id:"prohibitions",opacity:.75,visible:!0},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,zoomScale:144448,hasOpacitySlider:!0,includeLegend:!0}}}}]});var map,allLayers,maxLegendHeight,maxLegendDivHeight,printCount=0,legendLayers=[],measurement,identifyTask,identifyParams,cbrsClicked=!1,bufferClicked=!1,selectPointonMap=!1,pointSelection,inUnit="",inUnitType="",fiDate="N/A",suDate="N/A",pinLoc="out",infoPar="",mapDate="",mapNo="",lat=0,long=0,locDesc,latLong,userAgree=0;require(["esri/map","esri/arcgis/utils","esri/config","esri/dijit/Geocoder","esri/dijit/HomeButton","esri/dijit/Legend","esri/dijit/LocateButton","esri/dijit/Measurement","esri/dijit/PopupTemplate","esri/graphic","esri/graphicsUtils","esri/geometry/Extent","esri/geometry/Multipoint","esri/geometry/Point","esri/layers/ArcGISTiledMapServiceLayer","esri/renderers/UniqueValueRenderer","esri/SpatialReference","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/tasks/DistanceParameters","esri/tasks/GeometryService","esri/Color","esri/tasks/FindTask","esri/tasks/FindParameters","esri/tasks/FindResult","esri/tasks/IdentifyParameters","esri/tasks/IdentifyTask","esri/tasks/LegendLayer","esri/tasks/PrintTask","esri/tasks/PrintParameters","esri/tasks/PrintTemplate","esri/tasks/query","esri/tasks/QueryTask","esri/tasks/BufferParameters","esri/geometry/webMercatorUtils","esri/urlUtils","dojo/dom","dojo/dom-class","dojo/dnd/Moveable","dojo/query","dojo/on","dojo/domReady!","dojo/_base/array"],function(e,t,i,a,n,o,r,s,l,c,p,d,m,u,y,g,h,f,b,v,S,w,L,T,k,C,R,x,D,B,A,I,M,P,E,N,_,O,U,F,G,j,z){function Y(){$("#printModal").modal("show")}function Z(){$("#getDataModal").modal("show")}function W(){function e(e){printCount++;var t=$("<p><label>"+printCount+': </label>&nbsp;&nbsp;<a href="'+e.url+'" target="_blank">'+r+" </a></p>");$("#printJobsDiv").find("p.toRemove").remove(),$("#printModalBody").append(t),$("#printTitle").val(""),$("#printExecuteButton").button("reset")}function t(e){alert("Sorry, an unclear print error occurred. Please try refreshing the application to fix the problem")}var i=new A;i.map=map;var a=new I;a.exportOptions={width:500,height:400,dpi:300},a.format="PDF",a.layout="Letter ANSI A Landscape CBRS Mapper V2",a.preserveScale=!1;var n=new D;n.layerId="cbrs";var o=$("#printTitle").val();""==o?a.layoutOptions={titleText:"CBRS",authorText:"Coastal Barrier Resources System (CBRS)",copyrightText:"This page was produced by the CBRS mapper",legendLayers:[n]}:a.layoutOptions={titleText:o,authorText:"Coastal Barrier Resources System (CBRS)",copyrightText:"This page was produced by the CBRS mapper",legendLayers:[n]};var r=a.layoutOptions.titleText;i.template=a;var s=new B("https://fwsprimary.wim.usgs.gov/server/rest/services/Utilities/PrintingTools/GPServer/Export%20Web%20Map%20Task");s.execute(i,e,t)}function V(){function e(e){printCount++;var t=$("<p><label>"+printCount+': </label>&nbsp;&nbsp;<a href="'+e.url+'" target="_blank">'+r+" </a></p>");$("#printJobsVal").find("p.toRemove").remove(),$("#valModalBody").append(t),document.getElementById("showPrintSetup").setAttribute("class","fa fa-file-pdf-o"),document.getElementById("printVal").setAttribute("class","btn btn-success btn-fixed")}function t(e){alert("Sorry, an unclear print error occurred. Please try refreshing the application to fix the problem")}locDesc=document.getElementById("locationDesc").value,""==locDesc&&(locDesc="N/A");var i=new A;i.map=map;var a=new I;a.exportOptions={width:400,height:550,dpi:300},a.format="PDF",a.layout="Letter ANSI A Portrait CBRS Mapper V2_Prohibitions",a.preserveScale=!1;var n=new D;n.layerId="prohibitions";var o=new D;o.layerId="cbrs",a.layoutOptions={titleText:"CBRS Validation",authorText:"Coastal Barrier Resources System (CBRS)",copyrightText:"This page was produced by the CBRS mapper",legendLayers:[n,o],scalebarUnit:"Miles",customTextElements:[{CustomText_FIDate:fiDate},{CustomText_SUDate:suDate},{CustomText_LocDesc:locDesc},{CustomText_PinLoc:String(pinLoc)},{CustomText_info:String(infoPar)},{CustomText_LatLong:latLong}]};var r=a.layoutOptions.titleText;i.template=a;var s=new B("https://fwsprimary.wim.usgs.gov/server/rest/services/Utilities/PrintingTools/GPServer/Export%20Web%20Map%20Task");s.execute(i,e,t)}function H(){oe.searchText=O.byId("searchText").value,ne.execute(oe,q)}function q(e){if(e.length>0){var t=[],i=e[0].feature;t.push(i);var a=p.graphicsExtent(t);map.setExtent(a)}else $("#invalidSearchModal").modal("show")}function J(e,t){var i;document.getElementById&&(i=document.getElementById(e))&&i.style&&(i.style.cursor=t)}function X(e,t){var i=new u({x:t,y:e,spatialReference:{wkid:3857}}),a=new f({angle:0,xoffset:0,yoffset:6,type:"esriPMS",url:"/images/glyphicons-pin.png",imageData:"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAYCAYAAADDLGwtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjE0MTI1RTk3ODUzNzExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjE0MTI1RTk2ODUzNzExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTk5NzA1OGEtZDI3OC00NDZkLWE4ODgtNGM4MGQ4YWI1NzNmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzRkZmQxMGMtY2NlNS0xMTc4LWE5OGQtY2NkZmM5ODk5YWYwIi8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z2x5cGhpY29uczwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+xuL6IgAAAMZJREFUeNrskrERwjAMRS2OgjIjMAJlSkrG8BiUGYERnA0oU2YEs0HYgJJOSL5vn/D5IPTo7l9k6dmOv+2Y2akkvGgRMaT5UPqAApoP0VxNCGDSSgy4gwYDMsYuYqWusb39jZQofGkARYTka2xEtxXc3R7mk3xtT0uh+GgMjwbQ3Oc+ZTNzENExWcE8v9UbIAOk+tRurT1/8HdQjN/Z8dY0TvLpTe8stSg3dC2gFPYGGs1OB8BLuWs8BoXzlk99QdKfdPASYAAYDYAkrGb8NgAAAABJRU5ErkJggg==",contentType:"image/png",width:8,height:20});map.graphics.add(new c(i,a)),document.getElementById("legendPoint").setAttribute("class","legendPtVisible"),$("#validationModal").modal("show");var n=N.xyToLngLat(t,e);latLong=String(Math.round(1e6*n[0])/1e6)+", "+String(Math.round(1e6*n[1])/1e6),document.getElementById("selectPoint").setAttribute("class","btn btn-success btn-fixed")}function Q(){"Null"==suDate&&(suDate="N/A"),"Null"==fiDate&&(fiDate="N/A"),"in"==pinLoc?(pinLoc="Within Unit "+inUnit,"Otherwise Protected Area"==inUnitType?infoPar="The user placed pin location is within Otherwise Protected Area Unit "+inUnit+" of the CBRS.  For the official CBRS map depicting this area, please see the map numbered "+mapNo+", dated "+mapDate+". The official CBRS maps are accessible at https://www.fws.gov/cbra/maps/index.html. \r\n \r\nThe Coastal Barrier Improvement Act (Pub. L. 101-591; 42 U.S.C. § 4028) prohibits Federal flood insurance within OPAs, with an exception for structuresthat are used in a manner consistent with the purpose for which the area is protected (e.g., park visitors center, park restroom facilities, etc.). \r\nThe prohibition on Federal flood insurance for this pin location took effect on "+fiDate+'. Federal flood insurance through the National Flood Insurance Program is available if the subject building was constructed (or permitted and under construction) before the flood insurance prohibition date, and has not beensubstantially improved or substantially damaged since. For more information about the restrictions on Federal flood insurance, please refer to the Federal Emergency Management Agency’s (FEMA) regulations in Title 44 Part 71 of the Code of Federal Regulations and Section 19 of FEMA’s Flood Insurance Manual: https://www.fema.gov/flood-insurance-manual. \r\nThe CBRS information is derived directly from the CBRS web service provided by the U.S. Fish and Wildlife Service (Service). This map was exported on <dyn type="date" format=""/> at <dyn type="time" format=""/> and does not reflect changes or amendments subsequent to this date and time.  The CBRS boundaries on this map may change or become superseded by new boundaries over time. \r\n \r\nThis map image is void if one or more of the following map elements do not appear: basemap imagery, CBRS unit labels, prohibition date labels, legend, scale bar, map creation date.':"System Unit"==inUnitType&&(infoPar="The user placed pin location is within System Unit "+inUnit+" of the CBRS.  For the official CBRS map depicting this area, please see the map numbered "+mapNo+", dated "+mapDate+". The official CBRS maps are accessible at https://www.fws.gov/cbra/maps/index.html. \r\nThe Coastal Barrier Resources Act (Pub. L. 97-348) and subsequent amendments (16 U.S.C. § 3501 et seq.) prohibit most Federal funding and financial assistancewithin System Units, including flood insurance. \r\n \r\nThe prohibition on Federal flood insurance for this pin location took effect on "+fiDate+". Federal flood insurance through the National Flood Insurance Program is available if the subject building was constructed (or permitted and under construction) before the flood insurance prohibition date, and has not beensubstantially improved or substantially damaged since. For more information about the restrictions on Federal flood insurance, please refer to the Federal Emergency Management Agency’s (FEMA) regulations in Title 44 Part 71 of the Code of Federal Regulations and Section 19 of FEMA’s Flood Insurance Manual: https://www.fema.gov/flood-insurance-manual. The prohibition on all other Federal expenditures and financial assistance (besides flood insurance) for this pin location took effect on "+suDate+'.  \r\nThe CBRS information is derived directly from the CBRS web service provided by the U.S. Fish and Wildlife Service (Service). This map was exported on <dyn type="date" format=""/> at <dyn type="time" format=""/> and does not reflect changes or amendments subsequent to this date and time.  The CBRS boundaries on this map may change or become superseded by new boundaries over time. \r\n \r\nThis map image is void if one or more of the following map elements do not appear: basemap imagery, CBRS unit labels, prohibition date labels, legend, scale bar, map creation date.')):"buff"==pinLoc?(pinLoc="Within CBRS Buffer Zone",fiDate="Undetermined",suDate="Undetermined",infoPar='The user placed pin location is within the CBRS Buffer Zone. The CBRS Buffer Zone represents the area immediately adjacent to the CBRS Boundary where users are advised to contact the U.S. Fish and Wildlife Service for an official determination as to whether the property or project site is located "in" or "out" of the CBRS. For information on obtaining an official CBRS property determination, please visit: http://www.fws.gov/cbra/Determinations.html. \r\n \r\nThe CBRS information is derived directly from the CBRS web service provided by the U.S. Fish and Wildlife Service (Service). This map was exported on <dyn type="date" format=""/> at <dyn type="time" format=""/>  and does not reflect changes or amendments subsequent to this date and time. The CBRS boundaries on this map may change or become superseded by new boundaries over time. \r\n \r\nThis map image is void if one or more of the following map elements do not appear: basemap imagery, CBRS unit labels, prohibition date labels, legend, scale bar, map creation date.'):"out"==pinLoc&&(pinLoc="Outside CBRS",infoPar="The user placed pin location is not within the CBRS. For the nearest official CBRS map depicting this area, please see the map numbered "+mapNo+", dated "+mapDate+'. The official CBRS maps are accessible at https://www.fws.gov/cbra/maps/index.html. \r\n \r\nThe CBRS information is derived directly from the CBRS web service provided by the U.S. Fish and Wildlife Service (Service). This map was exported on <dyn type="date" format=""/> at <dyn type="time" format=""/> and does not reflect changes or amendments subsequent to this date and time. The CBRS boundaries on this map may change or become superseded by new boundaries over time. \r\n \r\nThis map image is void if one or more of the following map elements do not appear: basemap imagery, CBRS unit labels, prohibition date labels, legend, scale bar, map creation date.'),console.log(infoPar),document.getElementById("runValidation").innerHTML="Done!",document.getElementById("runValidation").setAttribute("class","btn btn-success btn-fixed")}i.defaults.io.corsEnabledServers.push("fwsprimary.wim.usgs.gov"),i.defaults.geometryService=new w("https://fwsmapper.wim.usgs.gov/arcgis/rest/services/Utilities/Geometry/GeometryServer"),map=new e("mapDiv",{basemap:"satellite",extent:new d(-14638882.654811008,2641706.3772205533,-6821514.898031538,6403631.161302788,new h({wkid:3857}))});var K=new n({map:map,extent:new d(-14638882.654811008,2641706.3772205533,-6821514.898031538,6403631.161302788,new h({wkid:3857}))},"homeButton");K.startup();var ee=new r({map:map,scale:4514},"locateButton");ee.startup(),measurement=new s({map:map,advancedLocationUnits:!0},O.byId("measurementDiv")),measurement.startup(),$(window).resize(function(){$("#legendCollapse").hasClass("in")?(maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("height",maxLegendHeight),$("#legendElement").css("max-height",maxLegendHeight),maxLegendDivHeight=$("#legendElement").height(),$("#legendDiv").css("max-height",maxLegendDivHeight)):$("#legendElement").css("height","initial")}),$("#printNavButton").click(function(){Y()}),$("#printExecuteButton").click(function(e){e.preventDefault(),$(this).button("loading"),W()}),$("#showPrintSetup").click(function(e){e.preventDefault(),document.getElementById("showPrintSetup").setAttribute("class","fa fa-spinner"),V()}),$("#getDataButton").click(function(){Z()}),j(map,"load",function(){var e=map.getScale().toFixed(0);$("#scale")[0].innerHTML=addCommas(e);var t=N.webMercatorToGeographic(map.extent.getCenter());$("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3))}),j(map,"zoom-end",function(){var e=map.getScale().toFixed(0);$("#scale")[0].innerHTML=addCommas(e)}),j(map,"mouse-move",function(e){if($("#mapCenterLabel").css("display","none"),null!=e.mapPoint){var t=N.webMercatorToGeographic(e.mapPoint);$("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3))}}),j(map,"pan-end",function(){$("#mapCenterLabel").css("display","inline");var e=N.webMercatorToGeographic(map.extent.getCenter());$("#latitude").html(e.y.toFixed(3)),$("#longitude").html(e.x.toFixed(3))});var te=new y("https://server.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer"),ie=new y("https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer"),ae=new y("https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer");j(O.byId("btnStreets"),"click",function(){map.setBasemap("streets"),map.removeLayer(ie),map.removeLayer(te),map.removeLayer(ae)}),j(O.byId("btnSatellite"),"click",function(){map.setBasemap("satellite"),map.removeLayer(ie),map.removeLayer(te),map.removeLayer(ae)}),j(O.byId("btnHybrid"),"click",function(){map.setBasemap("hybrid"),map.removeLayer(ie),map.removeLayer(te),map.removeLayer(ae)}),j(O.byId("btnTerrain"),"click",function(){map.setBasemap("terrain"),map.removeLayer(ie),map.removeLayer(te),map.removeLayer(ae)}),j(O.byId("btnGray"),"click",function(){map.setBasemap("gray"),map.removeLayer(ie),map.removeLayer(te),map.removeLayer(ae)}),j(O.byId("btnNatGeo"),"click",function(){map.setBasemap("national-geographic"),map.removeLayer(ie),map.removeLayer(te),map.removeLayer(ae)}),j(O.byId("btnOSM"),"click",function(){map.setBasemap("osm"),map.removeLayer(ie),map.removeLayer(te),map.removeLayer(ae)}),j(O.byId("btnTopo"),"click",function(){map.setBasemap("topo"),map.removeLayer(ie),map.removeLayer(te),map.removeLayer(ae)}),j(O.byId("btnNatlMap"),"click",function(){map.addLayer(ie,1),map.removeLayer(te),map.removeLayer(ae),map.removeLayer(ae)}),j(O.byId("btnUsgsImgTopo"),"click",function(){map.setBasemap("satellite"),map.addLayer(ae,1),map.removeLayer(ie),map.removeLayer(te)}),j(O.byId("btnUsgsTopo"),"click",function(){map.addLayer(te,1),map.removeLayer(ie),map.removeLayer(ae)}),identifyParams=new R,identifyParams.tolerance=0,identifyParams.returnGeometry=!0,identifyParams.layerOption=R.LAYER_OPTION_ALL,identifyParams.layerIds=[0,2,4,6],identifyParams.spatialReference=map.spatialReference,identifyParams.width=map.width,identifyParams.height=map.height,identifyTask=new x("https://fwsprimary.wim.usgs.gov/server/rest/services/CBRAMapper/CBRS_Prohibitions_Test/MapServer"),$("#selectionDiv").lobiPanel({unpin:!1,reload:!1,minimize:!1,close:!1,expand:!1,editTitle:!1,maxWidth:800,maxHeight:500}),$("#selectionDiv .dropdown").prepend("<div id='selectionClose' tite='close'><b>X</b></div>"),$("#selectionMin").click(function(){$("#selectionDiv").css("visibility","hidden")}),$("#selectionClose").click(function(){$("#selectionDiv").css("visibility","hidden"),map.graphics.clear()}),$("#selectPoint").click(function(){map.graphics.clear(),selectPointonMap=!0,$("#validationModal").modal("hide")}),$("#runValidation").click(function(){graphPoint=map.graphics.graphics[0],graphPoint&&"point"==graphPoint.geometry.type&&userAgree%2==0?$("#userAgreementModal").modal("show"):graphPoint&&"point"==graphPoint.geometry.type&&userAgree%2!=0?Q():alert("No map point found. Please place point on map, then try again.")}),$("#userCheckbox").click(function(){userAgree++,userAgree%2!=0?document.getElementById("userCheckbox").setAttribute("class","fa fa-check-square-o"):document.getElementById("userCheckbox").setAttribute("class","fa fa-square-o")}),$("#continueValidation").click(function(){userAgree%2!=0?($("#userAgreementModal").modal("hide"),$("#validationModal").modal("show"),ga("send","event","validation","click","User Agreement"),Q()):alert("You must agree with the terms and conditions to continue with CBRS Validation.")}),$("#bufferDiv").lobiPanel({unpin:!1,reload:!1,minimize:!1,close:!1,expand:!1,editTitle:!1,maxWidth:800,maxHeight:500}),$("#bufferDiv .dropdown").prepend("<div id='bufferClose' tite='close'><b>X</b></div>"),$("#bufferClose").click(function(){$("#bufferDiv").css("visibility","hidden")}),j(map,"click",function(e){if(1==cbrsClicked)return void(cbrsClicked=!1);if(1==bufferClicked)return void(bufferClicked=!1);if(null==measurement.activeTool&&(map.graphics.clear(),document.getElementById("runValidation").innerHTML="Go",document.getElementById("runValidation").setAttribute("class","btn btn-default btn-fixed"),document.getElementById("selectPoint").setAttribute("class","btn btn-default btn-fixed"),document.getElementById("printVal").setAttribute("class","btn btn-default btn-fixed"),identifyParams.geometry=e.mapPoint,identifyParams.mapExtent=map.extent,map.getLevel())){identifyTask=new x("https://fwsprimary.wim.usgs.gov/server/rest/services/CBRAMapper/CBRS_Prohibitions_Test/MapServer");var t=identifyTask.execute(identifyParams);J("mainDiv"),t.addCallback(function(t){if(0===t.length||selectPointonMap){if(selectPointonMap){map.graphics.clear(),long=e.mapPoint.x.toString(),lat=e.mapPoint.y.toString(),inUnit="",inUnitType="",fiDate="N/A",suDate="N/A",pinLoc="out",mapDate="",mapNo="",locDesc="";var i=!1;if(t.length>0)for(var a=0;a<t.length;a++)"CBRS Prohibitions"!=t[a].layerName||i?"CBRS Determination Zone"==t[a].layerName?(i=!0,pinLoc="buff"):"CBRS Map Footprints"==t[a].layerName&&(mapDate=t[a].feature.attributes.Map_Date,mapNo=t[a].feature.attributes.Panel_No):(inUnit=t[a].feature.attributes.Unit,inUnitType=t[a].feature.attributes.CBRS_Type,fiDate=t[a].feature.attributes.FI_Date,suDate=t[a].feature.attributes.SU_Date,pinLoc="in");X(lat,long),selectPointonMap=!1}}else{document.getElementById("legendPoint").setAttribute("class","legendPt");var n,o,r;for(a=0;a<t.length;a++)"CBRS Units"==t[a].layerName&&(containsUnit=!0,r=t[a].feature.attributes.Unit);for(var a=0;a<t.length;a++){n=t[a].feature,o=n.attributes;var s;if("CBRS Units"==t[a].layerName){if($("#unitId").text(o.Unit),$("#unitName").text(o.Name),$("#unitType").text(o.Unit_Type),o.Fast_Acres||""!==o.Wet_Acres){var l;l=Number(o.Fast_Acres)+Number(o.Wet_Acres)||"Data not available at this time"}$("#totalAcre").text(l),s=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([255,225,0]),2),new dojo.Color([98,194,204,0])),n.geometry.spatialReference=map.spatialReference;var c=n;c.setSymbol(s),map.graphics.add(c),$("#selectionDiv").css("visibility","visible");var p=$("#selectionDiv").data("lobiPanel"),d=$(document).height(),m=$(document).width(),u=.5*m-.5*$("#selectionDiv").width(),y=.8*d-1*$("#selectionDiv").height();p.setPosition(u,y),1==p.isPinned()&&p.unpin()}else if("CBRS Map Footprints"==t[a].layerName&&-1!=t[a].feature.attributes.Title.search(r)){$("#mapLink").html('<a href="'+o.Map_Link+'" target="_blank">Click here for official CBRS map</a>'),$("#mapDate").text(o.Map_Date),$("#titleOne").text(o.Title),$("#titleTwo").html(o.Title_2),$("#titleThree").text(o.Title_3),s=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([255,0,225]),2),new dojo.Color([98,194,204,0])),"Null"==o.Title_2?($("#titleTwo").hide(o.Title_2),$(".hideNullTwo").hide()):($("#titleTwo").show(o.Title_2),$(".hideNullTwo").show()),"Null"==o.Title_3?($("#titleThree").hide(o.Title_3),$(".hideNullThree").hide()):($("#titleThree").show(o.Title_3),$(".hideNullThree").show()),n.geometry.spatialReference=map.spatialReference;var c=n;c.setSymbol(s),map.graphics.add(c)}else if("CBRS Map Footprints"==t[a].layerName&&-1!=t[a].feature.attributes.Title_2.search(r)){$("#mapLink").html('<a href="'+o.Map_Link+'" target="_blank">Click here for official CBRS map</a>'),$("#mapDate").text(o.Map_Date),$("#titleOne").text(o.Title),$("#titleTwo").html(o.Title_2),$("#titleThree").text(o.Title_3),s=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([255,0,225]),2),new dojo.Color([98,194,204,0])),"Null"==o.Title_2?($("#titleTwo").hide(o.Title_2),$(".hideNullTwo").hide()):($("#titleTwo").show(o.Title_2),$(".hideNullTwo").show()),n.geometry.spatialReference=map.spatialReference;var c=n;c.setSymbol(s),map.graphics.add(c)}else if("CBRS Map Footprints"==t[a].layerName&&-1!=t[a].feature.attributes.Title_3.search(r)){$("#mapLink").html('<a href="'+o.Map_Link+'" target="_blank">Click here for official CBRS map</a>'),$("#mapDate").text(o.Map_Date),$("#titleOne").text(o.Title),$("#titleTwo").html(o.Title_2),$("#titleThree").text(o.Title_3),s=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([255,0,225]),2),new dojo.Color([98,194,204,0])),"Null"==o.Title_3?($("#titleThree").hide(o.Title_3),$(".hideNullThree").hide()):($("#titleThree").show(o.Title_3),$(".hideNullThree").show()),n.geometry.spatialReference=map.spatialReference;var c=n;c.setSymbol(s),map.graphics.add(c)}else"CBRS Prohibitions"==t[a].layerName&&n&&($("#FIDate").text(o.FI_Date),$("#SUDate").text(o.SU_Date));if(2==t[a].layerId){s=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,0,0]),2),new dojo.Color([0,0,0,0])),$("#bufferDiv").css("visibility","visible");var p=$("#bufferDiv").data("lobiPanel"),d=$(document).height(),m=$(document).width(),u=.5*m-.5*$("#bufferDiv").width(),y=.8*d-1*$("#bufferDiv").height();p.setPosition(u,y),1==p.isPinned()&&p.unpin(),$("#bufferDiv").css("visibility","visible")&&$("#selectionDiv").modal(hide)}}J("mainDiv","default"),map.setCursor("default")}})}}),map.on("load",function(){map.infoWindow.set("highlight",!1),map.infoWindow.set("titleInBody",!1),map.addLayer(ae,1),$("#disclaimerModal").modal("show")});var ne=new T("https://fwsprimary.wim.usgs.gov/server/rest/services/CBRAMapper/CBRS_Prohibitions_Test/MapServer"),oe=new k;oe.layerIds=[4],oe.searchFields=["Unit"],oe.outSpatialReference=map.spatialReference,oe.returnGeometry=!0,console.log("find unit:",oe.outSpatialReference),$("#btnUnitSearch").click(H),search_api.create("geosearch",{on_result:function(e){require(["esri/geometry/Extent"],function(t){var i=["GNIS_MAJOR","GNIS_MINOR","ZIPCODE","AREACODE"],a=i.indexOf(e.result.properties.Source);$("#geosearchModal").modal("hide"),-1==a?map.setExtent(new esri.geometry.Extent({xmin:e.result.properties.LonMin,ymin:e.result.properties.LatMin,xmax:e.result.properties.LonMax,ymax:e.result.properties.LatMax,spatialReference:{wkid:4326}}),!0):require(["esri/geometry/Point"],function(t){map.centerAndZoom(new t(e.result.properties.Lon,e.result.properties.Lat),12)})})},include_usgs_sw:!0,include_usgs_gw:!0,include_usgs_sp:!0,include_usgs_at:!0,include_usgs_ot:!0,include_huc2:!0,include_huc4:!0,include_huc6:!0,include_huc8:!0,include_huc10:!0,include_huc12:!0}),$(document).ready(function(){function e(){$("#geosearchModal").modal("show")}function t(){$("#aboutModal").modal("show"),$("")}$("#geosearchNav").click(function(){e()}),$(".showAboutModal").click(function(){$("#contactTob").modal("hide"),$("#aboutModal").modal("show"),$("#aboutTab").trigger("click")}),$("#aboutNav").click(function(){t()}),$("#html").niceScroll(),$("#sidebar").niceScroll(),$("#sidebar").scroll(function(){$("#sidebar").getNiceScroll().resize()}),maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("max-height",maxLegendHeight),$("#legendDiv").css("max-height",maxLegendDivHeight),$("#measurementCollapse").on("shown.bs.collapse",function(){$("#measureLabel").show()}),$("#measurementCollapse").on("hide.bs.collapse",function(){window.innerWidth<=767&&$("#measureLabel").hide()})}),$(document).ready(function(){function e(){$("#cbrsModal").modal("show")}$("#cbrsNav").click(function(){e()})}),$(document).ready(function(){}),$(document).ready(function(){}),$(document).ready(function(){$("#validationNav").click(function(){$("#validationModal").modal("show")})}),require(["esri/InfoTemplate","esri/tasks/locator","esri/tasks/query","esri/tasks/QueryTask","esri/graphicsUtils","esri/geometry/Point","esri/geometry/Extent","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ArcGISImageServiceLayer","esri/layers/FeatureLayer","esri/layers/WMSLayer","esri/layers/WMSLayerInfo","esri/tasks/GeometryService","dijit/form/CheckBox","dijit/form/RadioButton","dojo/query","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/on"],function(e,t,i,a,n,r,s,l,c,p,d,m,u,y,g,h,f,b,v,S,w){function L(e,t,i,a,n,r,s){if(map.addLayer(i),T.push([n,camelize(a),i]),$(function(){if(0==legendDiv.innerHTML.length){var e=new o({map:map,layerInfos:legendLayers},"legendDiv");e.startup(),$("#legendDiv").niceScroll()}}),n){if(!$("#"+camelize(n)).length){var l;if("Data Source"==n)var l=$('<div id="'+camelize(n+" Root")+'" class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+n+'<span id="info'+camelize(n)+'" title="Data Source identifies the scale, year and emulsion of the imagery that was used to map the wetlands and riparian areas for a given area. It also identifies areas that have Scalable data, which is an interim data product in areas of the nation where standard compliant wetland data is not yet available. Click for more info on Scalable data." class="glyphspan glyphicon glyphicon-question-sign pull-right"></span><span id="opacity'+camelize(n)+'" style="padding-right: 5px" class="glyphspan glyphicon glyphicon-adjust pull-right"></span></button> </div>');else var l=$('<div id="'+camelize(n+" Root")+'" class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+n+"</button> </div>");
l.click(function(e){l.find("i.glyphspan").toggleClass("fa-check-square-o fa-square-o"),$.each(T,function(e,t){var i=map.getLayer(t[2].id);if(t[0]==n)if($("#"+t[1]).find("i.glyphspan").hasClass("fa-dot-circle-o")&&l.find("i.glyphspan").hasClass("fa-check-square-o")){console.log("adding layer: ",t[1]),map.addLayer(t[2]);var i=map.getLayer(t[2].id);i.setVisibility(!0)}else if(l.find("i.glyphspan").hasClass("fa-square-o")){console.log("removing layer: ",t[1]);var i=map.getLayer(t[2].id);i.setVisibility(!1)}})});var c=$('<div id="'+camelize(n)+'" class="btn-group-vertical" data-toggle="buttons"></div>');$("#toggle").append(c)}if(i.visible)var p=$('<div id="'+camelize(a)+'" class="btn-group-vertical lyrTog radioTog" style="cursor: pointer;" data-toggle="buttons"> <label class="btn btn-default"  style="font-weight: bold;text-align: left"> <input type="radio" name="'+camelize(n)+'" autocomplete="off"><i class="glyphspan fa fa-dot-circle-o '+camelize(n)+'"></i>&nbsp;&nbsp;'+a+"</label> </div>");else var p=$('<div id="'+camelize(a)+'" class="btn-group-vertical lyrTog radioTog" style="cursor: pointer;" data-toggle="buttons"> <label class="btn btn-default"  style="font-weight: bold;text-align: left"> <input type="radio" name="'+camelize(n)+'" autocomplete="off"><i class="glyphspan fa fa-circle-o '+camelize(n)+'"></i>&nbsp;&nbsp;'+a+"</label> </div>");$("#"+camelize(n)).append(p),p.click(function(e){if($(this).find("i.glyphspan").hasClass("fa-circle-o")){$(this).find("i.glyphspan").toggleClass("fa-dot-circle-o fa-circle-o");var t=$(this)[0].id;$.each(T,function(e,i){if(i[0]==n)if(i[1]==t&&$("#"+camelize(n+" Root")).find("i.glyphspan").hasClass("fa-check-square-o")){console.log("adding layer: ",i[1]),map.addLayer(i[2]);var a=map.getLayer(i[2].id);a.setVisibility(!0)}else if(i[1]==t&&$("#"+camelize(n+" Root")).find("i.glyphspan").hasClass("fa-square-o"))console.log("group heading not checked");else{console.log("removing layer: ",i[1]);var a=map.getLayer(i[2].id);a.setVisibility(!1),$("#"+i[1]).find("i.glyphspan").hasClass("fa-dot-circle-o")&&$("#"+i[1]).find("i.glyphspan").toggleClass("fa-dot-circle-o fa-circle-o")}})}})}else if(s.includeInLayerList){if(i.visible&&s.hasOpacitySlider)var p=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+a+'<span id="opacity'+camelize(a)+'" style="padding-right: 5px" class="glyphspan glyphicon glyphicon-adjust pull-right"></span></button></div>');else if(!i.visible&&s.hasOpacitySlider)var p=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+a+'<span id="info'+camelize(a)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></span><span id="opacity'+camelize(a)+'" style="padding-right: 5px" class="glyphspan glyphicon glyphicon-adjust pull-right"></span></button></div>');else if(i.visible&&void 0!==s.hasOpacitySlider&&1==s.hasOpacitySlider)var p=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+a+'<span id="info'+camelize(a)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></button></span></div>');else if(i.visible||void 0===s.hasOpacitySlider||1!=s.hasOpacitySlider)if(i.visible)var p=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+a+'<span id="info'+camelize(a)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></span><span id="opacity'+camelize(a)+'" class="glyphspan glyphicon glyphicon-adjust pull-right"></button></span></div>');else if(i.visible)if(i.visible)var p=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+a+"</button></span></div>");else var p=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+a+"</button> </div>");else var p=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+a+'<span id="info'+camelize(a)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></button></span></div>');else var p=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+a+'<span id="info'+camelize(a)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></span><span id="opacity'+camelize(a)+'" class="glyphspan glyphicon glyphicon-adjust pull-right"></button></span></div>');p.click(function(e){$(this).find("i.glyphspan").toggleClass("fa-check-square-o fa-square-o"),$(this).find("button").button("toggle"),i.visible?i.setVisibility(!1):i.setVisibility(!0),s.otherLayersToggled&&$.each(s.otherLayersToggled,function(e,t){var a=map.getLayer(t);a.setVisibility(i.visible)})})}if(void 0!==t){var d=camelize(e);if(!$("#"+d).length){if(t)var m=$('<div id="'+d+'"><div class="alert alert-info" role="alert"><strong>'+e+"</strong></div></div>");else var m=$('<div id="'+d+'"></div>');$("#toggle").append(m)}if(n){if($("#"+d).append(l),$("#"+d).append(c),void 0!==s.moreinfo&&s.moreinfo){var u="#info"+camelize(n),y=$(u);y.click(function(e){window.open(s.moreinfo,"_blank"),e.preventDefault(),e.stopPropagation()})}if($("#opacity"+camelize(n)).length>0){var u="#opacity"+camelize(n),g=$(u);g.click(function(e){e.preventDefault(),e.stopPropagation(),$(".opacitySlider").remove();var t=map.getLayer(r.id).opacity,i=$('<div class="opacitySlider"><label id="opacityValue">Opacity: '+t+'</label><label class="opacityClose pull-right">X</label><input id="slider" type="range"></div>');$("body").append(i),$("#slider")[0].value=100*t,$(".opacitySlider").css("left",event.clientX-180),$(".opacitySlider").css("top",event.clientY-50),$(".opacitySlider").mouseleave(function(){$(".opacitySlider").remove()}),$(".opacityClose").click(function(){$(".opacitySlider").remove()}),$("#slider").change(function(e){var t=$("#slider")[0].value/100;console.log("o: "+t),$("#opacityValue").html("Opacity: "+t),map.getLayer(r.id).setOpacity(t),s.otherLayersToggled&&$.each(s.otherLayersToggled,function(e,i){var a=map.getLayer(i);a.setOpacity(t)})})})}}else $("#"+d).append(p),$("#opacity"+camelize(a)).length>0&&$("#opacity"+camelize(a)).click(function(e){e.preventDefault(),e.stopPropagation(),$(".opacitySlider").remove();var t=map.getLayer(r.id).opacity,i=$('<div class="opacitySlider"><label id="opacityValue">Opacity: '+t+'</label><label class="opacityClose pull-right">X</label><input id="slider" type="range"></div>');$("body").append(i),$("#slider")[0].value=100*t,$(".opacitySlider").css("left",event.clientX-180),$(".opacitySlider").css("top",event.clientY-50),$(".opacitySlider").mouseleave(function(){$(".opacitySlider").remove()}),$(".opacityClose").click(function(){$(".opacitySlider").remove()}),$("#slider").change(function(e){var t=$("#slider")[0].value/100;console.log("o: "+t),$("#opacityValue").html("Opacity: "+t),map.getLayer(r.id).setOpacity(t),s.otherLayersToggled&&$.each(s.otherLayersToggled,function(e,i){var a=map.getLayer(i);a.setOpacity(t)})})})}else if($("#toggle").append(p),void 0!==s.moreinfo&&s.moreinfo){var u="#info"+camelize(a),y=$(u);y.click(function(e){alert(e.currentTarget.id),e.preventDefault(),e.stopPropagation()})}}var T=(new u("https://fwsmapper.wim.usgs.gov/arcgis/rest/services/Utilities/Geometry/GeometryServer"),[]);$.each(allLayers,function(e,t){console.log("processing: ",t.groupHeading),$.each(t.layers,function(e,i){var a="";if(i.wimOptions.exclusiveGroupName)a=i.wimOptions.exclusiveGroupName;else if("agisDynamic"===i.wimOptions.layerType){var n=new l(i.url,i.options);if(i.visibleLayers&&n.setVisibleLayers(i.visibleLayers),i.wimOptions&&i.wimOptions.layerDefinitions){var o=[];$.each(i.wimOptions.layerDefinitions,function(e,t){o[e]=t}),n.setLayerDefinitions(o)}i.wimOptions&&1==i.wimOptions.includeLegend&&legendLayers.unshift({layer:n,title:e}),L(t.groupHeading,t.showGroupHeading,n,e,a,i.options,i.wimOptions)}})})})}),$(".close-alert").click(function(){$(this).parent().slideUp(250)}),$(document).ready(function(){}),$(function(){$('[data-toggle="tooltip"]').tooltip({selector:"",placement:"top",container:"body"})});